{"version":3,"file":"code.js","sourceRoot":"./","sources":["handlers/code.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EAAC,MAAM,EAAE,SAAS,EAAC,MAAM,OAAO,CAAC;AAC/C,OAAO,OAAO,MAAM,SAAS,CAAC;AAI9B,MAAM,KAAK,GAAG,CAAC,CAAK,EAAE,EAAE;IACvB,CAAC,CAAC,SAAS,CAAC,UAAU,GAAG,CAAC,CAAC,SAAS,CAAC,MAAM,CAC1C,YAAY,EACZ;QACC,YAAY,EAAC;YACZ,OAAO,EAAE,8KAA8K;YACvL,UAAU,EAAE,CAAC,CAAC;YACd,MAAM,EAAE,CAAC,CAAC;YACV,MAAM,EAAE,IAAI;SACZ;QACD,OAAO,EAAE,4ZAA4Z;QACra,OAAO,EAAE,uFAAuF;KAChG,CACD,CAAC;IAEF,OAAO,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC;IACxC,IAAI,CAAC,GAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;IAC3C,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC;IACvB,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,MAAM,GAAC,CAAC,CAAC;IAC9C,CAAC,CAAC,SAAS,CAAC,YAAY,CACvB,YAAY,EACZ,UAAU,EACV;QACC,kBAAkB,EAAE;YACnB,OAAO,EAAC,wGAAwG;YAChH,MAAM,EAAC,CAAC,CAAC;YACT,MAAM,EAAE;gBACP,QAAQ,EAAE,2DAA2D;gBACrE,OAAO,EAAE;oBACR,OAAO,EAAE,UAAU;oBACnB,KAAK,EAAE,YAAY;oBACnB,MAAM,EAAC,CAAC;iBACR;aACD;SACD;KACD,CACD,CAAC;IAEF,CAAC,CAAC,SAAS,CAAC,EAAE,GAAC,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC;AACvC,CAAC,CAAC;AAEF,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,MAAM,IAAI,GAA0B,CAAC,CAAC,EAAE,EAAE;IACzC,OAAO,GAAG,EAAE;QACX,MAAM,OAAO,GAAG,MAAM,CAAc,IAAI,CAAC,CAAC;QAC1C,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAgB,CAAC;QAExC,SAAS,CAAC,GAAG,EAAE;YACd,IAAI,OAAO,CAAC,OAAO,EAAE;gBACpB,OAAO,CAAC,gBAAgB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;aAC1C;QACF,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;QAEd,OAAO,CACN,6BAAK,QAAQ,EAAE,CAAC;YACf,8BAAM,GAAG,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC,YAAY,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,IAC3D,IAAI,CACC,CACF,CACN,CAAC;IACH,CAAC,CAAC;AACH,CAAC,CAAA;AAED,eAAe,IAAI,CAAC","sourcesContent":["import React, {useRef, useEffect} from \"react\";\nimport PrismJS from \"prismjs\";\nimport {Tokens} from \"marked\";\nimport {DefaultElementHandler} from \"../types\";\n\nconst addTS = (e:any) => {\n\te.languages.typescript = e.languages.extend(\n\t\t\"javascript\",\n\t\t{\n\t\t\t\"class-name\":{\n\t\t\t\tpattern: /(\\b(?:class|extends|implements|instanceof|interface|new|type)\\s+)(?!keyof\\b)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?:\\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,\n\t\t\t\tlookbehind: !0,\n\t\t\t\tgreedy: !0,\n\t\t\t\tinside: null\n\t\t\t},\n\t\t\tkeyword: /\\b(?:abstract|as|asserts|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|undefined|var|void|while|with|yield)\\b/,\n\t\t\tbuiltin: /\\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\\b/\n\t\t}\n\t);\n\n\tdelete e.languages.typescript.parameter;\n\tvar n=e.languages.extend(\"typescript\", {});\n\tdelete n[\"class-name\"];\n\te.languages.typescript[\"class-name\"].inside=n;\n\te.languages.insertBefore(\n\t\t\"typescript\",\n\t\t\"function\",\n\t\t{\n\t\t\t\"generic-function\": {\n\t\t\t\tpattern:/#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\\s*\\()/,\n\t\t\t\tgreedy:!0,\n\t\t\t\tinside: {\n\t\t\t\t\tfunction: /^#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*/,\n\t\t\t\t\tgeneric: {\n\t\t\t\t\t\tpattern: /<[\\s\\S]+/,\n\t\t\t\t\t\talias: \"class-name\",\n\t\t\t\t\t\tinside:n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t);\n\n\te.languages.ts=e.languages.typescript;\n};\n\naddTS(PrismJS);\n\nconst code: DefaultElementHandler = (t) => {\n\treturn () => {\n\t\tconst codeRef = useRef<HTMLElement>(null);\n\t\tconst { text, lang } = t as Tokens.Code;\n\n\t\tuseEffect(() => {\n\t\t\tif (codeRef.current) {\n\t\t\t\tPrismJS.highlightElement(codeRef.current);\n\t\t\t}\n\t\t}, [codeRef]);\n\n\t\treturn (\n\t\t\t<pre tabIndex={1}>\n\t\t\t\t<code ref={codeRef} className={lang ? `language-${lang}` : \"\"}>\n\t\t\t\t\t{text}\n\t\t\t\t</code>\n\t\t\t</pre>\n\t\t);\n\t};\n}\n\nexport default code;\n"]}